{% extends 'base.html' %}

{% block title %}
<title>Leaderboard</title>
{% endblock %}

{% block content %}
<div class="m-0 p-2 flex-fill flex-shrink-1">
    <form class="row mb-2 w-50" method="GET" action="{% url 'leaderboard' %}">
        <div class="col">
            {{filter.as_p}}
        </div>
        <div class="col">
            <button type="submit" class="btn btn-danger p-2">Filter</button>
        </div>
    </form>
    <div class="d-flex" style="height: 60vh;">
        <div class="flex-fill d-flex flex-column">
            <p class="mb-0 fw-bold">Test Points</p>
            <div class="overflow-auto">
                <ul class="list-group ">
                    <li
                        class="list-group-item sticky-top d-flex justify-content-between align-items-center bg-primary border-primary text-white fw-bold">
                        Student
                        <span class="badge">Points</span>
                    </li>
                    {%for student in students_p %}
                    <li class="list-group-item d-flex ">
                        {% if user.username == student.username %}
                        <div class="text-bg-secondary w-100 d-flex rounded ps-2">
                            <span class="text-white fw-bold">{{forloop.counter}}</span>
                            . {{student.username}} - {{student.name}}
                            <span class="badge text-bg-secondary rounded-pill ms-auto">{{student.points}}</span>
                        </div>
                        {% else %}
                        <span class="text-primary fw-bold">{{forloop.counter}}</span>
                        . {{student.username}} - {{student.name}}
                        <span class="badge bg-primary rounded-pill ms-auto">{{student.points}}</span>
                        {% endif %}
                    </li>
                    {%endfor%}
                </ul>
            </div>
        </div>
        <div class="vr m-4"></div>
        <div class="flex-fill d-flex flex-column">
            <p class="mb-0 fw-bold">Contibution Points</p>
            <div class="overflow-auto">
                <ul class="list-group">
                    <li
                        class="list-group-item sticky-top d-flex justify-content-between align-items-center bg-warning border-warning text-white fw-bold">
                        Student
                        <span class="badge">Points</span>
                    </li>
                    {%for student in students_c %}
                    <li class="list-group-item d-flex">
                        {% if user.username == student.username %}
                        <div class="text-bg-secondary w-100 d-flex rounded ps-2">
                            <span class="text-white fw-bold">{{forloop.counter}}</span>
                            . {{student.username}} - {{student.name}}
                            <span class="badge text-bg-secondary rounded-pill ms-auto">{{student.contrib_points}}</span>
                        </div>
                        {% else %}
                        <span class="text-primary fw-bold">{{forloop.counter}}</span>
                        . {{student.username}} - {{student.name}}
                        <span class="badge bg-primary rounded-pill ms-auto">{{student.contrib_points}}</span>
                        {% endif %}
                    </li>
                    {%endfor%}
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}